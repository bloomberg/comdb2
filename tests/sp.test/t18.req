DROP TABLE IF EXISTS t18
CREATE TABLE t18 (i INTEGER)$$
CREATE INDEX t18_i ON t18(i)
INSERT INTO t18 VALUES(1)
ANALYZE t18
CREATE PROCEDURE sp18_1 {
local function main()
    local dbstmt
    dbstmt = db:prepare("SELECT i FROM t18")
    dbstmt = db:prepare("SELECT i FROM t18")
    dbstmt:exec()
    dbstmt:emit()
end }$$
EXEC PROCEDURE sp18_1()
SELECT total_time < 10 FROM comdb2_fingerprints WHERE UPPER(normalized_sql) LIKE '%EXEC PROCEDURE SP18_1()%'
CREATE PROCEDURE sp18_2 {
local function main()
    local dbstmt
    dbstmt = db:prepare("SELECT i FROM t18 WHERE i=@i");
    db:bind("i", 1)
    dbstmt:exec()
    dbstmt:emit()
    db:bind("i", 3)
    dbstmt:exec()
    dbstmt:emit()
end }$$
EXEC PROCEDURE sp18_2()
SELECT total_time < 10 FROM comdb2_fingerprints WHERE UPPER(normalized_sql) LIKE '%EXEC PROCEDURE SP18_2()%'
