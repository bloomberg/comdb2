1 CREATE TABLE t1(i INT PRIMARY KEY, j INT)
1 SET TRANSACTION READ COMMITTED
2 SET TRANSACTION READ COMMITTED
1 BEGIN
2 BEGIN
1 INSERT INTO t1 VALUES(1, 0) ON CONFLICT DO NOTHING;
1 SELECT * FROM t1;
2 INSERT INTO t1 VALUES(1, 1);
2 SELECT * FROM t1;
2 COMMIT
1 COMMIT
1 SELECT * FROM t1;
1 DROP TABLE t1;

1 CREATE TABLE t1(i INT PRIMARY KEY, j INT)
1 SET TRANSACTION READ COMMITTED
2 SET TRANSACTION READ COMMITTED
1 BEGIN
2 BEGIN
1 INSERT INTO t1 VALUES(1, 0) ON CONFLICT DO REPLACE;
1 SELECT * FROM t1;
2 INSERT INTO t1 VALUES(1, 1);
2 SELECT * FROM t1;
2 COMMIT
1 COMMIT
1 SELECT * FROM t1;
1 DROP TABLE t1;

1 CREATE TABLE t1(i INT PRIMARY KEY, j INT)
1 SET TRANSACTION READ COMMITTED
2 SET TRANSACTION READ COMMITTED
1 BEGIN
2 BEGIN
1 INSERT INTO t1 VALUES(1, 0) ON CONFLICT(i) DO UPDATE SET j = j + 1;
1 SELECT * FROM t1;
2 INSERT INTO t1 VALUES(1, 1);
2 SELECT * FROM t1;
2 COMMIT
1 COMMIT
1 SELECT * FROM t1;
1 DROP TABLE t1;
