/*
   Copyright 2015 Bloomberg Finance L.P.

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
 */

/*
   JUST THE TYPE SYSTEM.
   DO NOT (PLEASE) PUT STUFF IN THIS FILE WITH
   1) dependencies outside of the type system
   2) no relation whatsoever to the type system (ie, a layer higher).

   note:  "types" deal only with a single datatype at a time.  nothing
   involving "buffers" will be here.  if you are looking for that, you
   probably want tag.c.
*/

#ifndef _INCLUDED_TYPES_H
#define _INCLUDED_TYPES_H

#include <ctype.h>
#include <stdlib.h>
#include <string.h>

#include <compile_time_assert.h>
#include <cdb2api.h>

#include "datetime.h"

#include "dfpal.h"
#include "decNumber.h"
#include "decSingle.h"
#include "decDouble.h"
#include "decQuad.h"
#include "decimal.h"
#include "blob_buffer.h"

#define DB_MAX_TZNAMEDB CDB2_MAX_TZNAME
#define DTTZ_PREC_MSEC 3
#define DTTZ_PREC_USEC 6
#define DTTZ_CONV_NOW 2 /* object is convertible and is generated by now() */

#include "csctypes.h"
extern int gbl_datetime_precision;

#define DTTZ_TEXT_TO_PREC(str, prec, def, action)                              \
    if (str == NULL) {                                                         \
        action;                                                                \
    } else if ((str)[0] == 'm' || (str)[0] == 'M')                             \
        prec = DTTZ_PREC_MSEC;                                                 \
    else if ((str)[0] == 'u' || (str)[0] == 'U')                               \
        prec = DTTZ_PREC_USEC;                                                 \
    else if (atoi(str) == DTTZ_PREC_MSEC)                                      \
        prec = DTTZ_PREC_MSEC;                                                 \
    else if (atoi(str) == DTTZ_PREC_USEC)                                      \
        prec = DTTZ_PREC_USEC;                                                 \
    else if (def)                                                              \
        prec = gbl_datetime_precision;                                         \
    else {                                                                     \
        action;                                                                \
    }

#include <plbitlib.h>

typedef struct dttz {
    /* this need to be signed so the datetimes before epoch compare correctly*/
    long long dttz_sec;       /* datetime extension, epoch seconds */
    unsigned int dttz_frac;   /* datetime extension, fractional seconds */
    unsigned short dttz_prec; /* datetime extension, precision */
    unsigned short dttz_conv; /* datetime extension, 1 if convertible, 2 if
                                 casted from now() */
} dttz_t;

typedef struct intv_ym {
    unsigned int years;  /* interval year */
    unsigned int months; /* interval months [0-11] */
} intv_ym_t;

typedef struct intv_ds {
    unsigned int days;   /* interval days    */
    unsigned int hours;  /* interval hours   */
    unsigned int mins;   /* interval minutes */
    unsigned int sec;    /* interval sec     */
    unsigned int frac;   /* interval fraction*/
    unsigned short prec; /* precision of interval fraction */
    unsigned short conv; /* 1 if convertible */
} intv_ds_t;

#define INTV_YM_TYPE 1
#define INTV_DS_TYPE 2
#define INTV_DECIMAL_TYPE 4
#define INTV_DSUS_TYPE 8
typedef struct intv {
    unsigned int type; /* interval type */
    int sign;          /* interval type */
    union {
        intv_ym_t ym;      /* year to day */
        intv_ds_t ds;      /* month to sec */
        sql_decimal_t dec; /* hack to override the decimal */
    } u;
} intv_t;

typedef struct {
    struct tm tm;
    unsigned int frac;
    unsigned int prec;
    char tzname[CDB2_MAX_TZNAME];
} datetime_t;

/* Options used to control conversion from/to this field. */
#ifndef _TYPES_INTERNAL_H_
enum {
    FLD_CONV_DBPAD = 0x01,
    FLD_CONV_TZONE = 0x02,
    FLD_CONV_LENDIAN = 0x04,
    FLD_CONV_TRUNCATE = 0x08,
};
#endif

/*
** flags: If no flags are set then this struct has no effect on the conversion.
**
** dbpad: For byte arrays.  Converting from - if the destination is smaller,
**   the lost bytes must match dbpad or it is a conversion failure.
**   Converting to - if the destination is larger then the spare bytes
**   will be padded with dbpad.  If dbapd==-1 then the source and
**   destination must match.
**
** step: Applies to out of range strings
**   0 -> truncate only
**   1 -> truncate and increment
*/
#define FIELD_CONV_OPTS_COMMON                                                 \
    unsigned flags;                                                            \
    int dbpad;                                                                 \
    int step;

struct field_conv_opts {
    FIELD_CONV_OPTS_COMMON
};

#ifndef _TYPES_INTERNAL_H_
struct field_conv_opts_tz {
    /* This prefix has to match 1-to-1 field_conv_opts */
    FIELD_CONV_OPTS_COMMON
    /* This field is required for datetime conversion and is used only
     * in SERVER_to_CLIENT and CLIENT_to_SERVER routines.
     */
    char tzname[DB_MAX_TZNAMEDB];
};
#endif
/* most code outside of the type system will just be using these routines
 * prototypes commented out since cproto creates them anyway. */
/*
int CLIENT_to_CLIENT();

int SERVER_to_CLIENT();

int CLIENT_to_SERVER();

int SERVER_to_SERVER();

int NULL_to_SERVER();
*/

/*
** We originally used bit 2 for null and bit 4 for data.
** this makes nulls sort HIGHER than data.
**
** Unfortunately our sql engine was written for a backend where
** nulls sort LOWER than data.  so we provide these routines to
** fix the mistake going forwards for new databases.
**
** Header byte indexed backwards to match btst/bset API.
** +-------------------------------+
** | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 |
** +-------------------------------+
**                  \_____/
**                     |
**                     +----> 00: One of null bits must be set
**                            01: Key will compare less than 'Plain old data'
**                            10: Plain old data
**                            11: Key will compare greater than 'Plain old data'
*/
enum {
    null_bit_high = 2,
    data_bit = 4,
    truncate_bit = 5, // won't actually make it to disk - in mem for search only
    null_bit_low = 6,
    resolve_master_bit = 7,
};

extern int null_bit;

#define set_data_int(to, from, sz, hdr)                                        \
    do {                                                                       \
        uint8_t *flag = (uint8_t *)(to);                                       \
        *flag = hdr;                                                           \
        ++flag;                                                                \
        memcpy(flag, (from), (sz)-1);                                          \
    } while (0)

#define set_data(to, from, sz)                                                 \
    do {                                                                       \
        uint8_t hdr = 0;                                                       \
        bset(&hdr, data_bit);                                                  \
        set_data_int((to), (from), (sz), hdr);                                 \
    } while (0)

#define stype_is_null(p) (btst(p, null_bit_low) || btst(p, null_bit_high))

#define set_null(p, len)                                                       \
    do {                                                                       \
        memset(p, 0, len);                                                     \
        bset(p, null_bit);                                                     \
    } while (0)

#define set_null_high(p, len)                                                  \
    do {                                                                       \
        bset(p, null_bit_high);                                                \
    } while (0)

#define set_null_low(p, len)                                                   \
    do {                                                                       \
        bset(p, null_bit_low);                                                 \
    } while (0)

#define stype_is_resolve_master(p) btst(p, resolve_master_bit)

#define set_resolve_master(p, len)                                                                                     \
    do {                                                                                                               \
        memset(p, 0, len);                                                                                             \
        bset(p, null_bit);                                                                                             \
        bset(p, resolve_master_bit);                                                                                   \
    } while (0)

void comdb2_types_set_null_bit(int n);

/* TODO move to combd2_api.h */
enum {
    SERVER_DATETIME_LEN = 1 + 8 + 2,
    SERVER_DATETIMEUS_LEN = 1 + 8 + 4,
    TM_LEN = 4 + 4 + 4 + 4 + 4 + 4 + 4 + 4 + 4,
    TM_EXT_LEN = TM_LEN + 4 + 4,
    CLIENT_DATETIME_LEN = TM_LEN + 4 + (1 * DB_MAX_TZNAMEDB),
    CLIENT_DATETIME_EXT_LEN = TM_EXT_LEN + 4 + (1 * DB_MAX_TZNAMEDB),
    CLIENT_INTV_YM_LEN = 4 + 4 + 4,
    CLIENT_INTV_DS_LEN = 4 + 4 + 4 + 4 + 4 + 4
};

#define IS_CLIENT_TYPE(t) ((t) < CLIENT_MAXTYPE)
#define IS_SERVER_TYPE(t) ((t) > SERVER_MINTYPE)

#define CLIENT_TYPE_CAN_BE_PARTIAL(type)                                       \
    ((type) == CLIENT_CSTR || (type) == CLIENT_PSTR ||                         \
     (type) == CLIENT_BYTEARRAY || (type) == CLIENT_PSTR2)

/* This macro defines the characters that are valid in a string type
 * (cstr or pstr).  ch should be an int.  beware of -ve char values! */
/* allow everything for now */
#define iscomdb2strchar(ch) (1)
/* allow everything except nulls - they don't jive well
   with fortran strings */
#define iscomdb2pstrchar(ch) ((ch) != '\0')

typedef unsigned short int2b;
typedef signed short comdb2_int2;
typedef unsigned int int4b;
typedef signed int comdb2_int4;
typedef unsigned long long int8b;
typedef signed long long comdb2_int8;

typedef float ieee4;
typedef unsigned int ieee4b;

typedef double ieee8;
typedef unsigned long long ieee8b;

#pragma pack(1)

typedef struct {
    unsigned char flag;
    unsigned short data;
} Suint2;

typedef struct {
    unsigned char flag;
    unsigned int data;
} Suint4;

typedef struct {
    unsigned char flag;
    unsigned long long data;
} Suint8;

typedef struct {
    unsigned char flag;
    unsigned short data;
} Sbint2;

typedef struct {
    unsigned char flag;
    unsigned int data;
} Sbint4;

typedef struct {
    unsigned char flag;
    unsigned long long data;
} Sbint8;

typedef struct {
    unsigned char flag;
    unsigned int data;
} Sbreal4;

typedef struct {
    unsigned char flag;
    unsigned long long data;
} Sreal8;

/* datetime field definitions */

typedef struct server_datetime {
    unsigned char flag;
    db_time_t sec;
    unsigned short msec;
} server_datetime_t;

/* datetimeus field definitions */

typedef struct server_datetimeus {
    unsigned char flag;
    db_time_t sec;
    unsigned int usec;
} server_datetimeus_t;

/* interval field definition */

typedef struct server_intv_ym {
    unsigned char flag;
    int months; /* interval months */
} server_intv_ym_t;

enum { SERVER_INTV_YM_TYPE_LEN = 1 + 4 };
BB_COMPILE_TIME_ASSERT(server_intv_ym_len,
                       sizeof(server_intv_ym_t) == SERVER_INTV_YM_TYPE_LEN);

typedef struct server_intv_ds {
    unsigned char flag;
    long long sec;       /* interval in seconds  */
    unsigned short msec; /* msec                 */
} server_intv_ds_t;

enum { SERVER_INTV_DS_TYPE_LEN = 1 + 8 + 2 };
BB_COMPILE_TIME_ASSERT(server_intv_ds_type_len,
                       sizeof(server_intv_ds_t) == SERVER_INTV_DS_TYPE_LEN);

typedef struct server_intv_dsus {
    unsigned char flag;
    long long sec;     /* interval in seconds  */
    unsigned int usec; /* msec                 */
} server_intv_dsus_t;

enum { SERVER_INTV_DSUS_TYPE_LEN = 1 + 8 + 4 };
BB_COMPILE_TIME_ASSERT(server_intv_dsus_type_len,
                       sizeof(server_intv_dsus_t) == SERVER_INTV_DSUS_TYPE_LEN);

#define DFP_32_DIGITS 7
#define DFP_64_DIGITS 16
#define DFP_128_DIGITS 34

#define DFP_32_EXPBITS 8
#define DFP_64_EXPBITS 10
#define DFP_128_EXPBITS 14

#define DECSINGLE_PACKED_COEF                                                  \
    (((DECSINGLE_Pmax + 1) / 2) + (DECSINGLE_Pmax + 1) % 2)
#define DECDOUBLE_PACKED_COEF                                                  \
    (((DECDOUBLE_Pmax + 1) / 2) + (DECDOUBLE_Pmax + 1) % 2)
#define DECQUAD_PACKED_COEF (((DECQUAD_Pmax + 1) / 2) + (DECQUAD_Pmax + 1) % 2)

/*
String representation for DECIMAL fields:
MaxLength(decimal32)  = 1(sign) + 1(dot) +  7(coefdigits) + 1(E) + 1(expsign) +
2(exp) + 1(zero) =  14 bytes
MaxLength(decimal64)  = 1(sign) + 1(dot) + 16(coefdigits) + 1(E) + 1(expsign) +
3(exp) + 1(zero) =  24 bytes
MaxLength(decimal128) = 1(sign) + 1(dot) + 34(coefdigits) + 1(E) + 1(expsign) +
4(exp) + 1(zero) =  43 bytes
*/
#define DFP_32_MAX_STR 14
#define DFP_64_MAX_STR 24
#define DFP_128_MAX_STR 43

typedef struct server_decimal32 {
    unsigned char flag;
    unsigned char sign; /*  1 byte sign */
    unsigned char exp;  /*  1 byte exponent [-95:95] biased 101; */
    unsigned char
        coef[DECSINGLE_PACKED_COEF]; /*  4 bytes for  chars, packed decimal  */
} server_decimal32_t;

enum { SERVER_DECIMAL32_TYPE_LEN = 1 + 1 + 1 + DECSINGLE_PACKED_COEF };
BB_COMPILE_TIME_ASSERT(server_decimal32_type_len,
                       sizeof(server_decimal32_t) == SERVER_DECIMAL32_TYPE_LEN);

typedef struct server_decimal64 {
    unsigned char flag;
    unsigned char sign; /*  1 byte sign */
    unsigned short exp; /*  2 bytes exponent [-383:384] biased 398; */
    unsigned char
        coef[DECDOUBLE_PACKED_COEF]; /*  9 bytes for chars, packed decimal  */
} server_decimal64_t;

enum { SERVER_DECIMAL64_TYPE_LEN = 1 + 1 + 2 + DECDOUBLE_PACKED_COEF };
BB_COMPILE_TIME_ASSERT(server_decimal64_type_len,
                       sizeof(server_decimal64_t) == SERVER_DECIMAL64_TYPE_LEN);

typedef struct server_decimal128 {
    unsigned char flag;
    unsigned char sign; /*  1 sign */
    unsigned short exp; /*  2 bytes exponent [-383:384] biased 398; */
    unsigned char
        coef[DECQUAD_PACKED_COEF]; /*  18 bytes for  chars, packed decimal  */
} server_decimal128_t;

enum { SERVER_DECIMAL128_TYPE_LEN = 1 + 1 + 2 + DECQUAD_PACKED_COEF };
BB_COMPILE_TIME_ASSERT(server_decimal128_type_len,
                       sizeof(server_decimal128_t) ==
                           SERVER_DECIMAL128_TYPE_LEN);

/* clients pass in blob fields like this.  the actual blob data is
 * passed out-of-band and then compared against what was expected.
 * a NULL blob field is represented by 16 bytes of zeroes. */
struct client_blob_type {
    int notnull; /* non zero if this blob is not null */
    unsigned length;
    int padding0;
    int padding1;
};
typedef struct client_blob_type client_blob_tp;

enum { CLIENT_BLOB_TYPE_LEN = 4 + 4 + 4 + 4 };
BB_COMPILE_TIME_ASSERT(client_blob_type_len,
                       sizeof(struct client_blob_type) == CLIENT_BLOB_TYPE_LEN);

#pragma pack() /* return to normal alignment */

/* types.c - generated by cproto */
void comdb2_types_set_null_bit(int n);
void comdb2_types_set_data_bit(int n);
int ieee8b_to_ieee8(ieee8b x, ieee8 *y);
int ieee8_to_ieee8b(ieee8 x, ieee8b *y);
int ieee4b_to_ieee4(ieee4b x, ieee4 *y);
int ieee4_to_ieee4b(ieee4 x, ieee4b *y);
int int8b_to_int8(int8b x, comdb2_int8 *y);
int int8_to_int8b(comdb2_int8 x, int8b *y);
int int4b_to_int4(int4b x, comdb2_int4 *y);
int int4_to_int4b(comdb2_int4 x, int4b *y);
int int2b_to_int2(int2b x, comdb2_int2 *y);
int int2_to_int2b(comdb2_int2 x, int2b *y);
int cstrlenlim(const char *s, int lim);
int cstrlenlimflipped(const unsigned char *s, int lim);
int validate_cstr(const char *s, int lim);
int validate_pstr(const char *s, int lim);
int pstrlenlim(const char *s, int lim);
int CLIENT_UINT_to_CLIENT_UINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_UINT_to_CLIENT_INT(const void *in, int inlen,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int CLIENT_UINT_to_CLIENT_REAL(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_UINT_to_CLIENT_CSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_UINT_to_CLIENT_PSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_UINT_to_CLIENT_PSTR2(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_UINT_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out, int outle,
                                    int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_INT_to_CLIENT_UINT(const void *in, int inlen,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int CLIENT_INT_to_CLIENT_INT(const void *in, int inlen,
                             const struct field_conv_opts *inopts,
                             blob_buffer_t *inblob, void *out, int outlen,
                             int *outdtsz,
                             const struct field_conv_opts *outopts,
                             blob_buffer_t *outblob);
int CLIENT_INT_to_CLIENT_REAL(const void *in, int inlen,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int CLIENT_INT_to_CLIENT_CSTR(const void *in, int inlen,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int CLIENT_INT_to_CLIENT_PSTR(const void *in, int inlen,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int CLIENT_INT_to_CLIENT_PSTR2(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_INT_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                   const struct field_conv_opts *inopts,
                                   blob_buffer_t *inblob, void *out, int outlen,
                                   int *outdtsz,
                                   const struct field_conv_opts *outopts,
                                   blob_buffer_t *outblob);
int CLIENT_REAL_to_CLIENT_UINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_REAL_to_CLIENT_INT(const void *in, int inlen,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int CLIENT_REAL_to_CLIENT_CSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_REAL_to_CLIENT_PSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_REAL_to_CLIENT_PSTR2(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_REAL_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_REAL_to_CLIENT_REAL(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_UINT_to_SERVER_UINT(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_CSTR_to_CLIENT_UINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_CSTR_to_CLIENT_INT(const void *in, int inlen,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int CLIENT_CSTR_to_CLIENT_REAL(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_CSTR_to_CLIENT_CSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_CSTR_to_CLIENT_PSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_CSTR_to_CLIENT_PSTR2(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_PSTR2_to_CLIENT_CSTR(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_PSTR2_to_CLIENT_INT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_PSTR2_to_CLIENT_UINT(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_PSTR2_to_CLIENT_REAL(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_PSTR2_to_CLIENT_PSTR(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_PSTR2_to_CLIENT_PSTR2(const void *in, int inlen,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int CLIENT_PSTR_to_CLIENT_UINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_PSTR_to_CLIENT_INT(const void *in, int inlen,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int CLIENT_PSTR_to_CLIENT_CSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_PSTR_to_CLIENT_REAL(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_PSTR_to_CLIENT_PSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_PSTR_to_CLIENT_PSTR2(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_PSTR2_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int CLIENT_PSTR_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_CSTR_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_CLIENT_UINT(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_CLIENT_INT(const void *in, int inlen,
                                   const struct field_conv_opts *inopts,
                                   blob_buffer_t *inblob, void *out, int outlen,
                                   int *outdtsz,
                                   const struct field_conv_opts *outopts,
                                   blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_CLIENT_REAL(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_CLIENT_CSTR(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_CLIENT_PSTR(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_CLIENT_PSTR2(const void *in, int inlen,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                         const struct field_conv_opts *inopts,
                                         blob_buffer_t *inblob, void *out,
                                         int outlen, int *outdtsz,
                                         const struct field_conv_opts *outopts,
                                         blob_buffer_t *outblob);
int CLIENT_BLOB_to_CLIENT_BLOB(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_UINT_to_CLIENT_BLOB(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_INT_to_CLIENT_BLOB(const void *in, int inlen,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int CLIENT_REAL_to_CLIENT_BLOB(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_CSTR_to_CLIENT_BLOB(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_PSTR_to_CLIENT_BLOB(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_CLIENT_BLOB(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_PSTR2_to_CLIENT_BLOB(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_BLOB_to_CLIENT_UINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_BLOB_to_CLIENT_INT(const void *in, int inlen,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int CLIENT_BLOB_to_CLIENT_REAL(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_BLOB_to_CLIENT_CSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_BLOB_to_CLIENT_PSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_BLOB_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_BLOB_to_CLIENT_PSTR2(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_INT_to_SERVER_BINT(const void *in, int inlen, int innull,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int CLIENT_REAL_to_SERVER_BREAL(const void *in, int inlen, int innull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_CSTR_to_SERVER_BCSTR(const void *in, int inlen, int innull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_PSTR_to_SERVER_BCSTR(const void *in, int inlen, int innull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_PSTR2_to_SERVER_BCSTR(const void *in, int inlen, int innull,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_SERVER_BYTEARRAY(const void *in, int inlen, int innull,
                                         const struct field_conv_opts *inopts,
                                         blob_buffer_t *inblob, void *out,
                                         int outlen, int *outdtsz,
                                         const struct field_conv_opts *outopts,
                                         blob_buffer_t *outblob);
int SERVER_UINT_to_CLIENT_UINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BINT_to_CLIENT_INT(const void *in, int inlen,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outnull, int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int SERVER_BREAL_to_CLIENT_REAL(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BCSTR_to_CLIENT_CSTR(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BCSTR_to_CLIENT_PSTR(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BCSTR_to_CLIENT_PSTR2(const void *in, int inlen,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outnull, int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int SERVER_BYTEARRAY_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                         const struct field_conv_opts *inopts,
                                         blob_buffer_t *inblob, void *out,
                                         int outlen, int *outnull, int *outdtsz,
                                         const struct field_conv_opts *outopts,
                                         blob_buffer_t *outblob);
int SERVER_BCSTR_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outnull, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int SERVER_BINT_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outnull, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_BREAL_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outnull, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int SERVER_BYTEARRAY_to_CLIENT_CSTR(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outnull, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_BYTEARRAY_to_CLIENT_PSTR2(const void *in, int inlen,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outnull, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int SERVER_BYTEARRAY_to_CLIENT_INT(const void *in, int inlen,
                                   const struct field_conv_opts *inopts,
                                   blob_buffer_t *inblob, void *out, int outlen,
                                   int *outnull, int *outdtsz,
                                   const struct field_conv_opts *outopts,
                                   blob_buffer_t *outblob);
int SERVER_BYTEARRAY_to_CLIENT_PSTR(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outnull, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_BYTEARRAY_to_CLIENT_REAL(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outnull, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_BYTEARRAY_to_CLIENT_UINT(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outnull, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_UINT_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outnull, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_BCSTR_to_CLIENT_INT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BCSTR_to_CLIENT_REAL(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BCSTR_to_CLIENT_UINT(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BINT_to_CLIENT_CSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BINT_to_CLIENT_PSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BINT_to_CLIENT_PSTR2(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BINT_to_CLIENT_REAL(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BINT_to_CLIENT_UINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BREAL_to_CLIENT_CSTR(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BREAL_to_CLIENT_INT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BREAL_to_CLIENT_PSTR2(const void *in, int inlen,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outnull, int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int SERVER_BREAL_to_CLIENT_PSTR(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BREAL_to_CLIENT_UINT(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_UINT_to_CLIENT_CSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_UINT_to_CLIENT_INT(const void *in, int inlen,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outnull, int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int SERVER_UINT_to_CLIENT_PSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_UINT_to_CLIENT_PSTR2(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_UINT_to_CLIENT_REAL(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_DATETIME_to_CLIENT_INT(const void *in, int inlen,
                                  const struct field_conv_opts *inopts,
                                  blob_buffer_t *inblob, void *out, int outlen,
                                  int *outnull, int *outdtsz,
                                  const struct field_conv_opts *outopts,
                                  blob_buffer_t *outblob);
int SERVER_DATETIMEUS_to_CLIENT_INT(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outnull, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_DATETIME_to_CLIENT_CSTR(const void *in, int inlen,
                                   const struct field_conv_opts *inopts,
                                   blob_buffer_t *inblob, void *out, int outlen,
                                   int *outnull, int *outdtsz,
                                   const struct field_conv_opts *outopts,
                                   blob_buffer_t *outblob);
int SERVER_DATETIMEUS_to_CLIENT_CSTR(const void *in, int inlen,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outnull, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_SERVER_BCSTR(const void *in, int inlen, int isnull,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_SERVER_BINT(const void *in, int inlen, int isnull,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_SERVER_BREAL(const void *in, int inlen, int isnull,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_SERVER_UINT(const void *in, int inlen, int isnull,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_CSTR_to_SERVER_BYTEARRAY(const void *in, int inlen, int isnull,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_INT_to_SERVER_BYTEARRAY(const void *in, int inlen, int isnull,
                                   const struct field_conv_opts *inopts,
                                   blob_buffer_t *inblob, void *out, int outlen,
                                   int *outdtsz,
                                   const struct field_conv_opts *outopts,
                                   blob_buffer_t *outblob);
int CLIENT_PSTR_to_SERVER_BYTEARRAY(const void *in, int inlen, int isnull,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_PSTR2_to_SERVER_BYTEARRAY(const void *in, int inlen, int isnull,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int CLIENT_REAL_to_SERVER_BYTEARRAY(const void *in, int inlen, int isnull,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_CSTR_to_SERVER_BINT(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_CSTR_to_SERVER_BREAL(const void *in, int inlen, int isnull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_CSTR_to_SERVER_UINT(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_INT_to_SERVER_BCSTR(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_INT_to_SERVER_BREAL(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_INT_to_SERVER_UINT(const void *in, int inlen, int isnull,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int CLIENT_PSTR_to_SERVER_BINT(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_PSTR_to_SERVER_BREAL(const void *in, int inlen, int isnull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_PSTR_to_SERVER_UINT(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_PSTR2_to_SERVER_UINT(const void *in, int inlen, int isnull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_PSTR2_to_SERVER_BINT(const void *in, int inlen, int isnull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_PSTR2_to_SERVER_BREAL(const void *in, int inlen, int isnull,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int CLIENT_REAL_to_SERVER_BCSTR(const void *in, int inlen, int isnull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_REAL_to_SERVER_BINT(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_REAL_to_SERVER_UINT(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_UINT_to_SERVER_BINT(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_UINT_to_SERVER_BREAL(const void *in, int inlen, int isnull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_UINT_to_SERVER_BCSTR(const void *in, int inlen, int isnull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_UINT_to_SERVER_BYTEARRAY(const void *in, int inlen, int isnull,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_CSTR_to_SERVER_DATETIME(const void *in, int inlen, int isnull,
                                   const struct field_conv_opts *inopts,
                                   blob_buffer_t *inblob, void *out, int outlen,
                                   int *outdtsz,
                                   const struct field_conv_opts *outopts,
                                   blob_buffer_t *outblob);
int CLIENT_CSTR_to_SERVER_DATETIMEUS(const void *in, int inlen, int isnull,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int CLIENT_INT_to_SERVER_DATETIME(const void *in, int inlen, int isnull,
                                  const struct field_conv_opts *inopts,
                                  blob_buffer_t *inblob, void *out, int outlen,
                                  int *outdtsz,
                                  const struct field_conv_opts *outopts,
                                  blob_buffer_t *outblob);
int CLIENT_INT_to_SERVER_DATETIMEUS(const void *in, int inlen, int isnull,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_BINT_to_SERVER_BYTEARRAY(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_BREAL_to_SERVER_BYTEARRAY(const void *in, int inlen,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int SERVER_BYTEARRAY_to_SERVER_BCSTR(const void *in, int inlen,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int SERVER_BYTEARRAY_to_SERVER_BINT(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_BYTEARRAY_to_SERVER_BREAL(const void *in, int inlen,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int SERVER_BCSTR_to_SERVER_BYTEARRAY(const void *in, int inlen,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int SERVER_UINT_to_SERVER_BYTEARRAY(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_BYTEARRAY_to_SERVER_BYTEARRAY(const void *in, int inlen,
                                         const struct field_conv_opts *inopts,
                                         blob_buffer_t *inblob, void *out,
                                         int outlen, int *outdtsz,
                                         const struct field_conv_opts *outopts,
                                         blob_buffer_t *outblob);
int CLIENT_UINT_to_SERVER_BLOB(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_INT_to_SERVER_BLOB(const void *in, int inlen, int isnull,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int CLIENT_REAL_to_SERVER_BLOB(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_CSTR_to_SERVER_BLOB(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_PSTR_to_SERVER_BLOB(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_SERVER_BLOB(const void *in, int inlen, int isnull,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_PSTR2_to_SERVER_BLOB(const void *in, int inlen, int isnull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_BLOB_to_SERVER_UINT(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_BLOB_to_SERVER_BINT(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_BLOB_to_SERVER_BREAL(const void *in, int inlen, int isnull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_BLOB_to_SERVER_BCSTR(const void *in, int inlen, int isnull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_BLOB_to_SERVER_BYTEARRAY(const void *in, int inlen, int isnull,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int CLIENT_BLOB_to_SERVER_BLOB(const void *in, int inlen, int isnull,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int CLIENT_BLOB_to_SERVER_BLOB2(const void *in, int inlen, int isnull,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_SERVER_BLOB2(const void *in, int inlen, int isnull,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int CLIENT_BYTEARRAY_to_SERVER_VUTF8(const void *in, int inlen, int isnull,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int SERVER_UINT_to_CLIENT_BLOB(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BINT_to_CLIENT_BLOB(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BREAL_to_CLIENT_BLOB(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BCSTR_to_CLIENT_BLOB(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BYTEARRAY_to_CLIENT_BLOB(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outnull, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_BLOB_to_CLIENT_UINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BLOB_to_CLIENT_INT(const void *in, int inlen,
                              const struct field_conv_opts *inopts,
                              blob_buffer_t *inblob, void *out, int outlen,
                              int *outnull, int *outdtsz,
                              const struct field_conv_opts *outopts,
                              blob_buffer_t *outblob);
int SERVER_BLOB_to_CLIENT_REAL(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BLOB_to_CLIENT_CSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BLOB_to_CLIENT_PSTR(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BLOB_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outnull, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_BLOB_to_CLIENT_PSTR2(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_UINT(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_INT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_REAL(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_CSTR(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_PSTR(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outnull, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_PSTR2(const void *in, int inlen,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outnull, int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_BLOB(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_UINT(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_INT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_REAL(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_CSTR(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_PSTR(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_BYTEARRAY(const void *in, int inlen,
                                     const struct field_conv_opts *inopts,
                                     blob_buffer_t *inblob, void *out,
                                     int outlen, int *outnull, int *outdtsz,
                                     const struct field_conv_opts *outopts,
                                     blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_PSTR2(const void *in, int inlen,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outnull, int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int SERVER_BLOB2_to_CLIENT_BLOB(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outnull, int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB_to_CLIENT_BLOB(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outnull, int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BINT_to_SERVER_BCSTR(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BINT_to_SERVER_BINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BINT_to_SERVER_BREAL(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BREAL_to_SERVER_BCSTR(const void *in, int inlen,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int SERVER_BREAL_to_SERVER_BINT(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BREAL_to_SERVER_BREAL(const void *in, int inlen,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int SERVER_BINT_to_SERVER_UINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BREAL_to_SERVER_UINT(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BCSTR_to_SERVER_UINT(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BYTEARRAY_to_SERVER_UINT(const void *in, int inlen,
                                    const struct field_conv_opts *inopts,
                                    blob_buffer_t *inblob, void *out,
                                    int outlen, int *outdtsz,
                                    const struct field_conv_opts *outopts,
                                    blob_buffer_t *outblob);
int SERVER_BCSTR_to_SERVER_BCSTR(const void *in, int inlen,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int SERVER_BCSTR_to_SERVER_BINT(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BCSTR_to_SERVER_BREAL(const void *in, int inlen,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int SERVER_UINT_to_SERVER_BCSTR(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_UINT_to_SERVER_BINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_UINT_to_SERVER_BREAL(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_UINT_to_SERVER_UINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BLOB_to_SERVER_BLOB(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BLOB_to_SERVER_BLOB2(const void *in, int inlen, const struct field_conv_opts *inopts, blob_buffer_t *inblob,
                                void *out, int outlen, int *outdtsz, const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_UINT_to_SERVER_BLOB(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BINT_to_SERVER_BLOB(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BREAL_to_SERVER_BLOB(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BCSTR_to_SERVER_BLOB(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB_to_SERVER_UINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BLOB_to_SERVER_BINT(const void *in, int inlen,
                               const struct field_conv_opts *inopts,
                               blob_buffer_t *inblob, void *out, int outlen,
                               int *outdtsz,
                               const struct field_conv_opts *outopts,
                               blob_buffer_t *outblob);
int SERVER_BLOB_to_SERVER_BREAL(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB_to_SERVER_BCSTR(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB2_to_SERVER_UINT(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB2_to_SERVER_BINT(const void *in, int inlen,
                                const struct field_conv_opts *inopts,
                                blob_buffer_t *inblob, void *out, int outlen,
                                int *outdtsz,
                                const struct field_conv_opts *outopts,
                                blob_buffer_t *outblob);
int SERVER_BLOB2_to_SERVER_BREAL(const void *in, int inlen,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int SERVER_BLOB2_to_SERVER_BCSTR(const void *in, int inlen,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int CLIENT_to_CLIENT(const void *in, int inlen, int intype,
                     const struct field_conv_opts *inopts,
                     blob_buffer_t *inblob, void *out, int outlen, int outtype,
                     int *outdtsz, const struct field_conv_opts *outopts,
                     blob_buffer_t *outblob);
int SERVER_to_CLIENT(const void *in, int inlen, int intype,
                     const struct field_conv_opts *inopts,
                     blob_buffer_t *inblob, int flags, void *out, int outlen,
                     int outtype, int *isnull, int *outdtsz,
                     const struct field_conv_opts *outopts,
                     blob_buffer_t *outblob);
int CLIENT_to_SERVER(const void *in, int inlen, int intype, int isnull,
                     const struct field_conv_opts *inopts,
                     blob_buffer_t *inblob, void *out, int outlen, int outtype,
                     int flags, int *outdtsz,
                     const struct field_conv_opts *outopts,
                     blob_buffer_t *outblob);
int SERVER_to_SERVER(const void *in, int inlen, int intype,
                     const struct field_conv_opts *inopts,
                     blob_buffer_t *inblob, int iflags, void *out, int outlen,
                     int outtype, int oflags, int *outdtsz,
                     const struct field_conv_opts *outopts,
                     blob_buffer_t *outblob);
int SERVER_DATETIME_to_CLIENT_DATETIME(const void *in, int inlen,
                                       const struct field_conv_opts *inopts,
                                       blob_buffer_t *inblob, void *out,
                                       int outlen, int *outnull, int *outdtsz,
                                       const struct field_conv_opts *outopts,
                                       blob_buffer_t *outblob);
int SERVER_DATETIMEUS_to_CLIENT_DATETIME(const void *in, int inlen,
                                         const struct field_conv_opts *inopts,
                                         blob_buffer_t *inblob, void *out,
                                         int outlen, int *outnull, int *outdtsz,
                                         const struct field_conv_opts *outopts,
                                         blob_buffer_t *outblob);
int SERVER_DATETIME_to_CLIENT_DATETIMEUS(const void *in, int inlen,
                                         const struct field_conv_opts *inopts,
                                         blob_buffer_t *inblob, void *out,
                                         int outlen, int *outnull, int *outdtsz,
                                         const struct field_conv_opts *outopts,
                                         blob_buffer_t *outblob);
int SERVER_DATETIMEUS_to_CLIENT_DATETIMEUS(
    const void *in, int inlen, const struct field_conv_opts *inopts,
    blob_buffer_t *inblob, void *out, int outlen, int *outnull, int *outdtsz,
    const struct field_conv_opts *outopts, blob_buffer_t *outblob);
int NULL_to_SERVER(void *out, int outlen, int outtype);
int SERVER_INTVYM_to_CLIENT_INTVYM(const void *in, int inlen,
                                   const struct field_conv_opts *inopts,
                                   blob_buffer_t *inblob, void *out, int outlen,
                                   int *outnull, int *outdtsz,
                                   const struct field_conv_opts *outopts,
                                   blob_buffer_t *outblob);
int SERVER_INTVYM_to_CLIENT_CSTR(const void *in, int inlen,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outnull, int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int SERVER_INTVDS_to_CLIENT_INTVDS(const void *in, int inlen,
                                   const struct field_conv_opts *inopts,
                                   blob_buffer_t *inblob, void *out, int outlen,
                                   int *outnull, int *outdtsz,
                                   const struct field_conv_opts *outopts,
                                   blob_buffer_t *outblob);
int SERVER_INTVDS_to_CLIENT_CSTR(const void *in, int inlen,
                                 const struct field_conv_opts *inopts,
                                 blob_buffer_t *inblob, void *out, int outlen,
                                 int *outnull, int *outdtsz,
                                 const struct field_conv_opts *outopts,
                                 blob_buffer_t *outblob);
int SERVER_INTVDSUS_to_CLIENT_INTVDSUS(const void *in, int inlen,
                                       const struct field_conv_opts *inopts,
                                       blob_buffer_t *inblob, void *out,
                                       int outlen, int *outnull, int *outdtsz,
                                       const struct field_conv_opts *outopts,
                                       blob_buffer_t *outblob);

int SERVER_INTVDSUS_to_CLIENT_CSTR(const void *in, int inlen,
                                   const struct field_conv_opts *inopts,
                                   blob_buffer_t *inblob, void *out, int outlen,
                                   int *outnull, int *outdtsz,
                                   const struct field_conv_opts *outopts,
                                   blob_buffer_t *outblob);
int CLIENT_DATETIME_to_SERVER_DATETIME(const void *in, int inlen, int isnull,
                                       const struct field_conv_opts *inopts,
                                       blob_buffer_t *inblob, void *out,
                                       int outlen, int *outdtsz,
                                       const struct field_conv_opts *outopts,
                                       blob_buffer_t *outblob);
int CLIENT_DATETIME_to_SERVER_DATETIMEUS(const void *in, int inlen, int isnull,
                                         const struct field_conv_opts *inopts,
                                         blob_buffer_t *inblob, void *out,
                                         int outlen, int *outdtsz,
                                         const struct field_conv_opts *outopts,
                                         blob_buffer_t *outblob);
int CLIENT_DATETIMEUS_to_SERVER_DATETIME(const void *in, int inlen, int isnull,
                                         const struct field_conv_opts *inopts,
                                         blob_buffer_t *inblob, void *out,
                                         int outlen, int *outdtsz,
                                         const struct field_conv_opts *outopts,
                                         blob_buffer_t *outblob);
int CLIENT_DATETIMEUS_to_SERVER_DATETIMEUS(
    const void *in, int inlen, int isnull, const struct field_conv_opts *inopts,
    blob_buffer_t *inblob, void *out, int outlen, int *outdtsz,
    const struct field_conv_opts *outopts, blob_buffer_t *outblob);
int CLIENT_INTVYM_to_SERVER_INTVYM(const void *in, int inlen, int isnull,
                                   const struct field_conv_opts *inopts,
                                   blob_buffer_t *inblob, void *out, int outlen,
                                   int *outdtsz,
                                   const struct field_conv_opts *outopts,
                                   blob_buffer_t *outblob);
int CLIENT_INTVDS_to_SERVER_INTVDS(const void *in, int inlen, int isnull,
                                   const struct field_conv_opts *inopts,
                                   blob_buffer_t *inblob, void *out, int outlen,
                                   int *outdtsz,
                                   const struct field_conv_opts *outopts,
                                   blob_buffer_t *outblob);
int CLIENT_INTVDSUS_to_SERVER_INTVDSUS(const void *in, int inlen, int isnull,
                                       const struct field_conv_opts *inopts,
                                       blob_buffer_t *inblob, void *out,
                                       int outlen, int *outdtsz,
                                       const struct field_conv_opts *outopts,
                                       blob_buffer_t *outblob);

int structdatetime2string_ISO(cdb2_client_datetime_t *in, char *out,
                              int outlen);
int utf8_validate(const char *str, int max_len, int *valid_len);

int utf8_bytelen(const char *str, int max_len);

int decimal_ondisk_to_sqlite(const void *in, int len, decQuad *dn,
                             int *outnull);
int sqlite_to_decimal_ondisk(decQuad *quad, void *rec, int len);

const uint8_t *server_datetime_get(server_datetime_t *p_server_datetime,
                                   const uint8_t *p_buf,
                                   const uint8_t *p_buf_end);

const uint8_t *server_datetimeus_get(server_datetimeus_t *p_server_datetime,
                                     const uint8_t *p_buf,
                                     const uint8_t *p_buf_end);

const uint8_t *server_intv_ym_get(server_intv_ym_t *p_server_intv_ym,
                                  const uint8_t *p_buf,
                                  const uint8_t *p_buf_end);

const uint8_t *server_intv_ds_get(server_intv_ds_t *p_server_intv_ds,
                                  const uint8_t *p_buf,
                                  const uint8_t *p_buf_end);
const uint8_t *server_intv_dsus_get(server_intv_dsus_t *p_server_intv_dsus,
                                    const uint8_t *p_buf,
                                    const uint8_t *p_buf_end);

int SERVER_DECIMAL_to_CLIENT_CSTR(const void *in, int inlen,
                                  const struct field_conv_opts *inopts,
                                  blob_buffer_t *inblob, void *out, int outlen,
                                  int *outnull, int *outdtsz,
                                  const struct field_conv_opts *outopts,
                                  blob_buffer_t *outblob);

/* Client datetime accessors */
uint8_t *client_datetime_put(const cdb2_client_datetime_t *p_client_datetime,
                             uint8_t *p_buf, const uint8_t *p_buf_end);
const uint8_t *client_datetime_get(cdb2_client_datetime_t *p_client_datetime,
                                   const uint8_t *p_buf,
                                   const uint8_t *p_buf_end);
uint8_t *
client_extended_datetime_put(const cdb2_client_datetime_t *p_client_datetime,
                             uint8_t *p_buf, const uint8_t *p_buf_end);
const uint8_t *
client_datetime_get_switch(cdb2_client_datetime_t *p_client_datetime,
                           const uint8_t *p_buf, const uint8_t *p_buf_end,
                           int little_endian);
uint8_t *
client_datetime_put_switch(const cdb2_client_datetime_t *p_client_datetime,
                           uint8_t *p_buf, const uint8_t *p_buf_end,
                           int little_endian);

uint8_t *
client_datetimeus_put(const cdb2_client_datetimeus_t *p_client_datetime,
                      uint8_t *p_buf, const uint8_t *p_buf_end);
const uint8_t *
client_datetimeus_get(cdb2_client_datetimeus_t *p_client_datetime,
                      const uint8_t *p_buf, const uint8_t *p_buf_end);
uint8_t *client_extended_datetimeus_put(
    const cdb2_client_datetimeus_t *p_client_datetime, uint8_t *p_buf,
    const uint8_t *p_buf_end);
const uint8_t *
client_datetimeus_get_switch(cdb2_client_datetimeus_t *p_client_datetime,
                             const uint8_t *p_buf, const uint8_t *p_buf_end,
                             int little_endian);
uint8_t *
client_datetimeus_put_switch(const cdb2_client_datetimeus_t *p_client_datetime,
                             uint8_t *p_buf, const uint8_t *p_buf_end,
                             int little_endian);

/* decimal support */
int dec_ctx_init(void *pctx, int type, int rounding);
int dec_parse_rounding(char *str, int len);
const char *dec_print_mode(int mode);

void _setIntervalDS(intv_ds_t *, long long sec, int msec);
void _setIntervalDSUS(intv_ds_t *, long long sec, int usec);

int str_to_dttz(const char *z, int n, const char *tz, dttz_t *, int);
int real_to_dttz(double, dttz_t *, int);
int int_to_dttz(int64_t, dttz_t *, int);
int dttz_to_str(const dttz_t *, char *out, int outlen, int *outdtsz,
                const char *tz);
int dttz_to_client_datetime(const dttz_t *, const char *tz,
                            cdb2_client_datetime_t *);
int dttz_to_client_datetimeus(const dttz_t *, const char *tz,
                              cdb2_client_datetimeus_t *);
int client_datetime_to_dttz(const cdb2_client_datetime_t *, const char *tz,
                            dttz_t *, int little_endian);
int client_datetimeus_to_dttz(const cdb2_client_datetimeus_t *, const char *tz,
                              dttz_t *, int little_endian);
int timespec_to_dttz(const struct timespec *, dttz_t *, int);

short decimal_quantum_get(char *pdec, int len, int *sign);
void decimal_quantum_set(char *pdec, int len, short *quantum, int *sign);
struct dbtable;
struct schema;
int extract_decimal_quantum(const struct dbtable *db, int ix, char *inbuf,
                            char *outbuf, int outbuf_max, int *outlen);
short field_decimal_quantum(const struct dbtable *db, struct schema *s,
                            int fnum, char *tail, int taillen, int *sign);

/* don't want duplicate code between sql and lua */
int dttz_cmp(const dttz_t *, const dttz_t *);
int interval_cmp(const intv_t *, const intv_t *);
int int_to_interval(int64_t, uint64_t *n0, uint64_t *n1, int *sign);
int double_to_interval(double, uint64_t *n0, uint64_t *n1, int *sign);
double interval_to_double(const intv_t *);
int str_to_interval(const char *c, int sz, int *type, uint64_t *n0,
                    uint64_t *n1, intv_ds_t *, int *sign);
void _normalizeIntervalYM(intv_ym_t *);
void add_dttz_intvds(const dttz_t *, const intv_t *, dttz_t *);
void sub_dttz_intvds(const dttz_t *, const intv_t *, dttz_t *);
void sub_dttz_dttz(const dttz_t *, const dttz_t *, intv_t *);

struct param_data {
    char *name;
    int type;
    int null;
    int pos;
    int len;
    union {
        int64_t i;
        double r;
        void *p;
        dttz_t dt;
        intv_t tv;
    } u;
    int arraylen; // bound array number of elements
};

int get_type(struct param_data *out, void *in, int inlen, int intype,
             const char *tzname, int little);

int intv_to_str(const intv_t *, char *, int, int *);

int odhfy_blob_buffer(const struct dbtable *db, blob_buffer_t *blob,
                      int blobind);
int unodhfy_blob_buffer(const struct dbtable *db, blob_buffer_t *blob,
                        int blobind);
#endif
